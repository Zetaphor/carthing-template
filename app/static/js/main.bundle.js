(()=>{var c=Object.defineProperty;var L=(n,o,t)=>o in n?c(n,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[o]=t;var r=(n,o,t)=>L(n,typeof o!="symbol"?o+"":o,t);function d(n){switch(n){case"Digit1":return 0;case"Digit2":return 1;case"Digit3":return 2;case"Digit4":return 3;case"KeyM":return 4;case"Enter":return 7;case"Escape":return 8;default:throw new Error("I don't know this button")}}function T(n,o){return"".concat(n,"_").concat(o)}var l=class{constructor(){r(this,"listeners");r(this,"buttonPressStartTimes");r(this,"longPressTimeouts");r(this,"wheelEventHandler",o=>{o.deltaX<0?this.notify(5,3):o.deltaX>0&&this.notify(6,3)});r(this,"keyDownEventHandler",o=>{try{let t=d(o.code);if(this.buttonPressStartTimes.has(t))return;this.buttonPressStartTimes.set(t,Date.now()),this.notify(t,0);let s=setTimeout(()=>{this.notify(t,2),this.longPressTimeouts.delete(t)},500);this.longPressTimeouts.set(t,s)}catch(t){console.log("Unmapped key:",o.code)}});r(this,"keyUpEventHandler",o=>{try{let t=d(o.code),s=this.buttonPressStartTimes.get(t),i=this.longPressTimeouts.get(t);i&&(clearTimeout(i),this.longPressTimeouts.delete(t)),s&&Date.now()-s<500&&this.notify(t,3),this.buttonPressStartTimes.delete(t),this.notify(t,1)}catch(t){console.log("Unmapped key:",o.code)}});this.listeners=new Map,this.buttonPressStartTimes=new Map,this.longPressTimeouts=new Map,document.addEventListener("wheel",this.wheelEventHandler),document.addEventListener("keydown",this.keyDownEventHandler),document.addEventListener("keyup",this.keyUpEventHandler)}addListener(o,t,s){let i=this.listeners.get(T(o,t))||[];this.listeners.set(T(o,t),[...i,s])}notify(o,t){let s=this.listeners.get(T(o,t))||[];for(let i of s)i(o,t)}};var p=new WebSocket("ws://localhost:8800"),u=document.getElementById("content");var e=new l;e.addListener(0,0,()=>{console.log("Button 1: Down")});e.addListener(0,1,()=>{console.log("Button 1: Up")});e.addListener(0,2,()=>{console.log("Button 1: Long Press")});e.addListener(0,3,()=>{console.log("Button 1: Short Press")});e.addListener(1,0,()=>{console.log("Button 2: Down")});e.addListener(1,1,()=>{console.log("Button 2: Up")});e.addListener(1,2,()=>{console.log("Button 2: Long Press")});e.addListener(1,3,()=>{console.log("Button 2: Short Press")});e.addListener(2,0,()=>{console.log("Button 3: Down")});e.addListener(2,1,()=>{console.log("Button 3: Up")});e.addListener(2,2,()=>{console.log("Button 3: Long Press")});e.addListener(2,3,()=>{console.log("Button 3: Short Press")});e.addListener(3,0,()=>{console.log("Button 4: Down")});e.addListener(3,1,()=>{console.log("Button 4: Up")});e.addListener(3,2,()=>{console.log("Button 4: Long Press")});e.addListener(3,3,()=>{console.log("Button 4: Short Press")});e.addListener(4,0,()=>{console.log("Button 5: Down")});e.addListener(4,1,()=>{console.log("Button 5: Up")});e.addListener(4,2,()=>{console.log("Button 5: Long Press")});e.addListener(4,3,()=>{console.log("Button 5: Short Press")});e.addListener(7,0,()=>{console.log("Scroll Press: Down")});e.addListener(7,1,()=>{console.log("Scroll Press: Up")});e.addListener(7,2,()=>{console.log("Scroll Press: Long Press")});e.addListener(7,3,()=>{console.log("Scroll Press: Short Press")});e.addListener(8,0,()=>{console.log("Front Button: Down")});e.addListener(8,1,()=>{console.log("Front Button: Up")});e.addListener(8,2,()=>{console.log("Front Button: Long Press")});e.addListener(8,3,()=>{console.log("Front Button: Short Press")});e.addListener(5,3,()=>{console.log("Scroll Left")});e.addListener(6,3,()=>{console.log("Scroll Right")});function a(){let n=new Date().toISOString();u.innerHTML="Huzzah!<p/>The current time is ".concat(n),setTimeout(a,100)}a();})();
